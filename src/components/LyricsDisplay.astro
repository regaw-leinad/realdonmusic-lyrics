---
interface Props {
  content: string;
}

const { content } = Astro.props;

// Split on the songwriter-notes marker
const notesMarker = "<!-- songwriter-notes -->";
const markerIndex = content.indexOf(notesMarker);
const lyricsHtml =
  markerIndex >= 0 ? content.substring(0, markerIndex).trim() : content.trim();

// Parse section labels like [Verse 1], [Chorus], etc. from the rendered HTML
// Bandcamp lyrics come as plain text lines, so we process the HTML paragraphs
---

<div class="lyrics-section">
  <div
    class="text-[12px] font-semibold uppercase tracking-[0.08em] text-text-muted mb-6"
  >
    Lyrics
  </div>
  <div
    class="lyrics-content font-[Georgia,serif] text-[22px] leading-[1.75] text-text-primary"
    set:html={lyricsHtml}
  />
</div>

<style>
  .lyrics-content :global(p) {
    margin-bottom: 0.25em;
  }

  .lyrics-content :global(p:empty) {
    margin-bottom: 1.25em;
  }
</style>
